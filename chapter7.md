## C++ 类 基础

>类的基本思想是**数据抽象(data abstraction)**和**封装**。数据抽象是一种依赖于**接口**(interface)和**实现**(implementation)分离的编程(以及设计)技术。类的接口包括用户所能执行的操作；类的实现则包括类的数据成员、负责接口实现的函数体以及定义类所需的各种私有函数。封装实现了类的接口和实现的分离。封装后的类隐藏了其实现细节，类的用户只能使用接口而无法访问实现部分

* 类的成员函数  
    定义和声明成员函数的方式和普通函数差不多。成员函数的声明必须在类内部，定义则既可以在类内部也可以在类外部。作为接口组成部分的非成员函数，其定义和声明都在类外部。
    ```cpp
    //类的成员函数
    struct Sales_date{
        std::string isbn(){return bookNo;}
        Sales_data& combine(const Sales_data&);
        double avg_price() const;

        std::string bookNo;
        unsigned units_sold = 0;
        double revenue = 0.0;
    }
    //类的非成员接口函数
    Sales_data add(const Sales_data&, const Sales_data& );
    std::ostream &print(std::ostream& , const Sales_data& );
    std::istream &read(std:: istream&, Sales_data& );

    ```

* `this`  
    >成员函数通过一个名为`this`的额外的隐式参数来访问调用它的那个对象。当调用成员函数时，用请求该函数的对象的地址初始化`this`。在成员函数内部，可以直接使用调用该函数的对象的成员，而无需通过成员访问运算符来进行访问，任何对类成员的访问都被看做是`this`的隐式引用。**this是一个常量指针**

* const成员函数     
    默认情况下，`this`的类型是指向类类型非常量版本的常量指针。所以无法在常量对象上调用普通的成员函数。当成员函数不会改变对象成员的值时，将`this`设置为指向常量的指针有助于提高函数的灵活性。  
    由于`this`参数是隐式的，C++中运行将const关键字放在函数的参数列表之后。
    ```cpp
     double avg_price() const;
    ```
    像这样使用`const`的成员函数被称作**常量成员函数**
    >Tips: 常量对象，以及常量对象的引用或指针都只能调用对象的常量成员函数

* 类作用域和成员函数
    >编译器分两步处理类：首先编译成员声明，然后才轮到成员函数体，因此，成员函数体可以随意使用类中其它成员而无需在意成员出现的顺序。


* 返回`this`对象的函数
    ```cpp
    Sales_data& Sales_data::combine(const Sales_data &rhs)
    {
        units_sold += rhs.units_sold;
        revenue += rhs.revenue;
        return *this; //返回调用该函数的对象的引用
    }
    ```
### 定义与类相关的非成员函数
>类的作者常常需要定义一些辅助函数，尽管这些函数的定义的操作从概念上讲属于类的接口部分，但其并不属于类。如果函数在概念上属于类，但是不定义在类中，则它一般应与类声明在同一个头文件内。

### 构造函数
>类定义了其对象被初始化的方式，类通过一个或几个特殊的成员函数来控制其对象的初始化过程，这些函数叫做**构造函数**

>构造函数的任务是初始化类对象的数据成员，无论何时只要类的对象被创建，就会执行构造函数
>* 构造函数的名字和类名相同
>* 构造函数无返回类型
>* 构造函数有一个参数列表（可能为空）和一个函数体（可能为空）
>* 类可以包含多个构造函数
>* 构造函数不能被声明为const

* 默认构造函数
    >对于没有提供初始值的对象，其执行力默认初始化。类通过一个特殊的构造函数来控制默认初始化的过程，这个构造函数被称为**默认构造函数**

    由编译器创建的构造函数又被称为**合成的默认构造函数**，对于大多数类，其初始化类的数据成员的规则是：
    >* 如果存在类内初始值，用它来初始化
    >*否则，默认初始化该成员

    **只有当类没有声明任何构造函数时，编译器才会自动地生成默认构造函数**

    `=default`在C++11新标准中，如果我们需要默认行为，可通过在参数列表后面写上`=default`来要求编译器合成默认构造函数。


* 构造函数初始值列表
    使用构造函数初始化列表:
    ```cpp
    Sales_data(const std:: string&s):bookNo(s){}
    Sales_data(const std:: string&s ,unsigned n,double p):
                bookNo(s),units_sold(n),revenue(p*n){}
    ```
    当某个数据成员被构造函数初始值列表忽略时，它将以与合成默认构造函数相同的方式隐式初始化。






